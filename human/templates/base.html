{% load static %}


<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="keyword" content="" />
    <meta name="author" content="flexilecode" />
    <!--! The above 6 meta tags *must* come first in the head; any other head content must come *after* these tags !-->
    <!--! BEGIN: Apps Title-->
    <title>    
       {% block title %} CineMate {% endblock title %}
    </title>
    <!--! END:  Apps Title-->
    <!--! BEGIN: Favicon-->
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}" />
    <!--! END: Favicon-->
    <!--! BEGIN: Bootstrap CSS-->
    <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}" />
    <!--! END: Bootstrap CSS-->
    <!--! BEGIN: Vendors CSS-->
    <link rel="stylesheet" type="text/css" href="{% static 'vendors/css/vendors.min.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'vendors/css/datepicker.min.css' %}"> 
    <link rel="stylesheet" type="text/css" href="{% static 'vendors/css/daterangepicker.min.css' %}" />

    <link rel="stylesheet" type="text/css" href="{% static 'vendors/css/dataTables.bs5.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'vendors/css/tagify.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'vendors/css/tagify-data.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'vendors/css/quill.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'vendors/css/select2.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'vendors/css/select2-theme.min.css' %}">    
    <!--! END: Vendors CSS-->
    <!--! BEGIN: Custom CSS-->
    <link rel="stylesheet" type="text/css" href="{% static 'css/theme.min.css' %}" />
    <script src="https://kit.fontawesome.com/743dee88bd.js" crossorigin="anonymous"></script>


    
</head>

    <!--! END: Vendors CSS-->

    <!--! END: Custom CSS-->
    <!--! HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries !-->
    <!--! WARNING: Respond.js doesn"t work if you view the page via file: !-->
    <!--[if lt IE 9]>
			<script src="https:oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https:oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
</head>

<body>
    <!--! ================================================================ !-->
    <!--! [Start] Navigation Manu !-->
    <!--! ================================================================ !-->
    <nav class="nxl-navigation">
        <div class="navbar-wrapper">
            <div class="m-header">
                <a href="/" class="b-brand">
               
                    <img src="{% static 'images/logo-full.png' %}" alt="CineMate" class="logo logo-lg" />
                    <img src="{% static 'images/logo-abbr.png' %}" alt="CineMate" class="logo logo-sm" />
                </a>
            </div>
            <div class="navbar-content">
                <ul class="nxl-navbar">
                    <li class="nxl-item nxl-caption">
                        <label>Navigation</label>
                    </li>
                    <li class="nxl-item nxl-hasmenu">
                        <a href="javascript:void(0);" class="nxl-link">
                            <span class="nxl-micon"><i class="feather-airplay"></i></span>
                            <span class="nxl-mtext">Dashboard</span><span class="nxl-arrow"><i class="feather-chevron-right"></i></span>
                        </a>
                        <ul class="nxl-submenu">
                            <li class="nxl-item"><a class="nxl-link" href="{% url "movie:dashboard" %}">CRM</a></li>
                            
                        </ul>
                    </li>


                    <li class="nxl-item nxl-hasmenu">
                        <a href="javascript:void(0);" class="nxl-link">
                            <span class="nxl-micon"><i class="fa-solid fa-tv"></i></span>
                            <span class="nxl-mtext">Movies</span><span class="nxl-arrow"><i class="feather-chevron-right"></i></span>
                        </a>
                        <ul class="nxl-submenu">
                            <li class="nxl-item"><a class="nxl-link" href="{% url 'movie:manage_movies' %}">All movies</a></li>
                        </ul>
                    </li>                    

                    <li class="nxl-item nxl-hasmenu">
                        <a href="javascript:void(0);" class="nxl-link">
                            <span class="nxl-micon"><i class="fa-solid fa-video"></i></span>
                            <span class="nxl-mtext">Recommendations</span><span class="nxl-arrow"><i class="feather-chevron-right"></i></span>
                        </a>
                        <ul class="nxl-submenu">
                            <li class="nxl-item"><a class="nxl-link" href="{% url 'movie:home' %}">Search</a></li>

                        </ul>
                    </li>


                
                </ul>

            </div>
        </div>
    </nav>
    <!--! ================================================================ !-->
    <!--! [End]  Navigation Manu !-->
    <!--! ================================================================ !-->
    <!--! ================================================================ !-->
    <!--! [Start] Header !-->
    <!--! ================================================================ !-->
    <header class="nxl-header">
        <div class="header-wrapper">
            <!--! [Start] Header Left !-->
            <div class="header-left d-flex align-items-center gap-4">
                <!--! [Start] nxl-head-mobile-toggler !-->
                <a href="javascript:void(0);" class="nxl-head-mobile-toggler" id="mobile-collapse">
                    <div class="hamburger hamburger--arrowturn">
                        <div class="hamburger-box">
                            <div class="hamburger-inner"></div>
                        </div>
                    </div>
                </a>
                <!--! [Start] nxl-head-mobile-toggler !-->
                <!--! [Start] nxl-navigation-toggle !-->
                <div class="nxl-navigation-toggle">
                    <a href="javascript:void(0);" id="menu-mini-button">
                        <i class="feather-align-left"></i>
                    </a>
                    <a href="javascript:void(0);" id="menu-expend-button" style="display: none">
                        <i class="feather-arrow-right"></i>
                    </a>
                </div>
                <!--! [End] nxl-navigation-toggle !-->
                <!--! [Start] nxl-lavel-mega-menu-toggle !-->
                <div class="nxl-lavel-mega-menu-toggle d-flex d-lg-none">
                    <a href="javascript:void(0);" id="nxl-lavel-mega-menu-open">
                        <i class="feather-align-left"></i>
                    </a>
                </div>
                <!--! [End] nxl-lavel-mega-menu-toggle !-->
                <!--! [Start] nxl-lavel-mega-menu !-->
                <div class="nxl-drp-link nxl-lavel-mega-menu">
                    <div class="nxl-lavel-mega-menu-toggle d-flex d-lg-none">
                        <a href="javascript:void(0)" id="nxl-lavel-mega-menu-hide">
                            <i class="feather-arrow-left me-2"></i>
                            <span>Back</span>
                        </a>
                    </div>

                </div>
                <!--! [End] nxl-lavel-mega-menu !-->
            </div>
            <!--! [End] Header Left !-->
            <!--! [Start] Header Right !-->
            <div class="header-right ms-auto">
                <div class="d-flex align-items-center">


                    <div class="nxl-h-item d-none d-sm-flex">
                        <div class="full-screen-switcher">
                            <a href="javascript:void(0);" class="nxl-head-link me-0" onclick="$('body').fullScreenHelper('toggle');">
                                <i class="feather-maximize maximize"></i>
                                <i class="feather-minimize minimize"></i>
                            </a>
                        </div>
                    </div>


                    <div class="dropdown nxl-h-item">
                        <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" data-bs-auto-close="outside">
                            <img src="{% static 'images/avatar/mkulima.png' %}" alt="user-image" class="img-fluid user-avtar me-0" />
                        </a>
                        <div class="dropdown-menu dropdown-menu-end nxl-h-dropdown nxl-user-dropdown">
                            <div class="dropdown-header">
                                <div class="d-flex align-items-center">
                                    <img src="{% static 'images/avatar/mkulima.png' %}" alt="user-image" class="img-fluid user-avtar" />
                                    <div>
                                        <h6 class="text-dark mb-0">{{request.user}} <span class="badge bg-soft-success text-success ms-1">PRO</span></h6>
                                        <span class="fs-12 fw-medium text-muted">{{request.user.email}}</span>
                                    </div>
                                </div>
                            </div>

                            <a href="{% url 'password_change' %}" class="dropdown-item">
                                <i class="feather-settings"></i>
                                <span>Change Password</span>
                            </a>    
        
                            <a href="javascript:void(0);" class="dropdown-item">
                                <i class="feather-settings"></i>
                                <span>Account Settings</span>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item" onclick="logout(); return false;">
                                <i class="feather-log-out"></i>
                                <span>Logout</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <!--! [End] Header Right !-->
        </div>
    </header>
    <!--! ================================================================ !-->
    <!--! [End] Header !-->
    <!--! ================================================================ !-->
    {% block body %}
    
    
    {% endblock body %}

      <!--! [End] Main Content !-->
    <!--! ================================================================ !-->
    <!--! ================================================================ !-->

 <script>
// Function to retrieve the CSRF token from cookies
function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = cookies[i].trim(); // Remove leading/trailing whitespace
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}

// Logout function to send a POST request
function logout() {
    var csrftoken = getCookie('csrftoken');
    fetch("{% url 'logout' %}", {
        method: 'POST',
        headers: {
            'X-CSRFToken': csrftoken,
            'Content-Type': 'application/x-www-form-urlencoded'
        },
        credentials: 'same-origin'
    })
    .then(response => {
        if (response.redirected) {
            window.location.href = response.url; // Redirect if necessary
        } else {
            window.location.reload(); // Reload the page
        }
    })
    .catch(error => {
        console.error('Error:', error);
    });
}

{% comment %} 
    $(document).ready(function() {
        $('.datatable').DataTable({
            "paging": true,
            "searching": true,
            "ordering": true,
            "info": true,
            "lengthChange": true,
            "pageLength": 10,
            "language": {
                "search": "Search:",
                "lengthMenu": "Display _MENU_ records per page",
                "info": "Showing _START_ to _END_ of _TOTAL_ records",
                "paginate": {
                    "first": "First",
                    "last": "Last",
                    "next": "Next",
                    "previous": "Previous"
                },
            }
        });
    });
     {% endcomment %}

</script>   
    <!--! ================================================================ !-->
    <!--! [End] Theme Customizer !-->
    <!--! ================================================================ !-->
    <!--! ================================================================ !-->
    <!--! Footer Script !-->
    <!--! ================================================================ !-->


 <!-- Include Bootstrap and jQuery -->
  
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  

    <!--! BEGIN: Vendors JS !-->
    <script src="{% static 'vendors/js/vendors.min.js' %}"></script>
    <!-- vendors.min.js {always must need to be top} -->

    <script src="{% static 'vendors/js/dataTables.min.js' %}"></script>
    <script src="{% static 'vendors/js/dataTables.bs5.min.js' %}"></script>

    <script src="{% static 'vendors/js/daterangepicker.min.js' %}"></script>
    <script src="{% static 'vendors/js/apexcharts.min.js' %}"></script>

    <script src="{% static 'vendors/js/circle-progress.min.js' %}"></script>
    <!--! END: Vendors JS !-->
    <!--! BEGIN: Apps Init  !-->
    <script src="{% static 'js/common-init.min.js' %}"></script>
    <script src="{% static 'js/dashboard-init.min.js' %}"></script>
    <!--! END: Apps Init !-->
    <!--! BEGIN: Theme Customizer  !-->

    <!--! END: Theme Customizer !-->


    <script src="{% static 'vendors/js/select2.min.js' %}"></script>
    <script src="{% static 'vendors/js/select2-active.min.js' %}"></script>
    <!--! END: Vendors JS !-->
    <script src="{% static 'js/leads-view-init.min.js' %}"></script>  

    <!-- vendors.min.js {always must need to be top} -->
    <script src="{% static 'vendors/js/circle-progress.min.js' %}"></script>

 
    <script src="{% static 'vendors/js/quill.min.js' %}"></script>

    {% comment %} <script src="{% static 'js/reports-tmesheets-init.min.js' %}"></script> {% endcomment %}

</body>

</html>